# Генерация конфига Cloudflare WARP для AmneziaWG, AmneziaVPN, DefaultVPN и WireGuard: Полное руководство

## Содержание

- [Зачем использовать Cloudflare WARP?](#зачем-использовать-cloudflare-warp)
- [Требования](#требования)
- [Генерация конфига](#генерация-конфига)
- [Установка клиентов](#установка-клиентов)
- [Импорт конфига](#импорт-конфига)
- [Проксирование только нужных сервисов](#проксирование-только-нужных-сервисов)
  - [Шаги для настройки выборочного проксирования](#шаги-для-настройки-выборочного-проксирования)
- [Проверка подключения](#проверка-подключения)
- [Настройка параметров](#настройка-параметров)
- [Устранение неполадок](#устранение-неполадок)
- [Пример конфига](#пример-конфига)
- [Часто задаваемые вопросы (FAQ)](#часто-задаваемые-вопросы-faq)
- [Полезные советы](#полезные-советы)
- [Поддержка и обратная связь](#поддержка-и-обратная-связь)
- [Дополнительные замечания](#дополнительные-замечания)
- [Заключение](#заключение)

## Зачем использовать Cloudflare WARP?

Cloudflare WARP — это мощный инструмент для создания безопасного и быстрого VPN-соединения, который позволяет обходить интернет-цензуру, защищать ваши данные и сохранять анонимность. Этот проект ([KnowerLife/VPN](https://github.com/KnowerLife/VPN/)) предоставляет скрипт для автоматической генерации конфигурации Cloudflare WARP, совместимой с клиентами AmneziaWG, WireGuard и AmneziaVPN. В этом руководстве мы подробно разберём, как настроить VPN, как проксировать только определённые сервисы (например, YouTube, Discord, Twitter), и как устранить возможные проблемы.

Cloudflare WARP шифрует ваш интернет-трафик, скрывает реальный IP-адрес и позволяет обходить региональные ограничения, что особенно актуально в регионах с интернет-блокировками, таких как Россия (РКН). Скрипт от KnowerLife упрощает настройку, а возможность выборочного проксирования позволяет направлять через VPN только трафик нужных сервисов, сохраняя скорость для остального интернета. WARP также оптимизирует соединение, что делает его идеальным для потокового видео, игр и работы.

## Требования

Перед началом убедитесь, что у вас есть:

- **Устройство с доступом к интернету**: Без строгих ограничений на UDP-порты, так как WARP использует протокол WireGuard.
- **Удалённый сервер**: ОС Debian или другая совместимая система. Рекомендуется использовать сервисы вроде **Aeza Terminator** для регионов с ограниченным доступом.
- **Утилиты `wget` и `curl`**: Установите их на Debian:
  ```
  sudo apt update && sudo apt install -y wget curl
  ```
- **VPN-клиент**: AmneziaWG, WireGuard или AmneziaVPN, установленный на вашем устройстве (Windows, macOS, Linux, Android, iOS).
- **Обход блокировок GitHub**: Если доступ к GitHub ограничен, используйте VPN или зеркало для загрузки скрипта.

**Совет для новичков**: Если вы впервые работаете с серверами, сервисы вроде Aeza Terminator предоставляют удобный интерфейс для аренды серверов с предустановленной Debian. Используйте SSH-клиент, например PuTTY, для подключения.

## Генерация конфига

Следуйте этим шагам, чтобы сгенерировать конфигурацию Cloudflare WARP:

1. **Подключитесь к серверу**  
   Используйте SSH для подключения к удалённому серверу с Debian (например, через Aeza Terminator или терминал).

2. **Запустите скрипт**  
   Выполните следующую команду в терминале:
   ```
   bash <(wget --inet4-only -qO- https://github.com/KnowerLife/VPN/raw/refs/heads/main/warp_generator.sh)
   ```
   Скрипт автоматически сгенерирует конфигурацию. После выполнения вы получите:
   - Текстовый конфиг или QR-код для импорта.
   - Ссылку для скачивания файла `WARP.conf`.

3. **Альтернативный способ (при блокировке)**  
   Если доступ к скрипту ограничен, скачайте его вручную:
   ```
   wget https://raw.githubusercontent.com/KnowerLife/VPN/main/warp_generator.sh
   chmod +x warp_generator.sh
   ./warp_generator.sh
   ```

**Полезный совет**: Сохраните сгенерированный конфиг и QR-код в безопасном месте (например, в зашифрованном облачном хранилище, таком как Google Drive или Dropbox), чтобы не потерять доступ.

## Установка клиентов

Установите подходящий VPN-клиент для вашей платформы:

| Платформа | AmneziaWG | WireGuard | AmneziaVPN |
|-----------|-----------|-----------|------------|
| **Windows** | [Скачать](https://amnezia.org/) | [Скачать](https://www.wireguard.com/install/) | [Скачать](https://amnezia.org/) |
| **macOS** | [Скачать](https://amnezia.org/) | [Скачать](https://www.wireguard.com/install/) | [Скачать](https://amnezia.org/) |
| **iOS** | [Скачать](https://amnezia.org/) | [Скачать](https://www.wireguard.com/install/) | [Скачать](https://amnezia.org/) |
| **Android** | [Скачать](https://amnezia.org/) | [Скачать](https://www.wireguard.com/install/) | [Скачать](https://amnezia.org/) |
| **Linux** | [Скачать](https://amnezia.org/) | `sudo apt install wireguard` | [Скачать](https://amnezia.org/) |
| **OpenWRT** | [Скачать](https://amnezia.org/) | [Инструкция](https://openwrt.org/docs/guide-user/services/vpn/wireguard/start) | [Пока нет инструкций] |

**Примечание**: Для Linux WireGuard устанавливается через пакетный менеджер, а для OpenWRT следуйте инструкциям в репозитории.

## Импорт конфига

1. **Установите клиент** на ваше устройство.
2. **Импортируйте конфигурацию**:
   - **AmneziaWG/AmneziaVPN**:
     - Откройте приложение.
     - Выберите «Импорт конфигурации».
     - Вставьте текст конфига или выберите файл `WARP.conf`.
     - Нажмите «Подключиться».
  - **DefaultVPN**:
     - Откройте приложение.
     - Нажмите +
     - Выберите «Import config from file».
     - Вставьте текст конфига или выберите файл `WARP.conf`.
     - Нажмите «Подключиться».
   - **WireGuard**:
     - Откройте приложение и нажмите «+» (или эквивалент).
     - Выберите «Импорт из файла» или «Сканировать QR-код».
     - Укажите файл `WARP.conf` или отсканируйте QR-код.
     - **Важно**: Перед импортом в WireGuard удалите следующие строки из конфига, так как они несовместимы:
       ```
       S1 = 0
       S2 = 0
       Jc = 4
       Jmin = 40
       Jmax = 70
       H1 = 1
       H2 = 2
       H3 = 3
       H4 = 4
       MTU = 1280
       I1 = ...
       ```
3. **Подключитесь** к VPN.

**Для новичков**: Чтобы удалить строки из конфига, откройте файл `WARP.conf` в текстовом редакторе (например, Notepad на Windows или `nano` на Linux: `nano WARP.conf`) и удалите указанные параметры.

## Проксирование только нужных сервисов

Чтобы настроить Cloudflare WARP для проксирования только определённых сервисов (например, YouTube, Discord, Twitter и т.д.), вы можете изменить поле `AllowedIPs` в конфигурационном файле, указав только IP-диапазоны, связанные с этими сервисами. Это позволяет направлять через VPN только трафик выбранных сервисов, сохраняя обычное интернет-соединение для остального трафика, что может повысить скорость и снизить нагрузку на VPN.

### Шаги для настройки выборочного проксирования

1. **Откройте файл конфигурации**  
   Откройте файл `WARP.conf` в текстовом редакторе (например, Notepad на Windows, `nano` на Linux или VS Code).

2. **Найдите строку `AllowedIPs`**  
   В разделе `[Peer]` найдите строку, начинающуюся с `AllowedIPs`. По умолчанию она установлена в `0.0.0.0/0, ::/0`, что направляет весь трафик через VPN.

3. **Замените `AllowedIPs` на IP-диапазоны нужных сервисов**  
   Замените строку `AllowedIPs` на IP-диапазоны для сервисов, которые вы хотите проксировать. Ниже приведены IP-диапазоны для популярных сервисов:

   - **YouTube + Discord**:
     ```
     AllowedIPs = 34.64.0.0/10, 34.96.0.0/20, 34.108.0.0/20, 34.122.0.0/17, 34.128.0.0/10, 35.184.0.0/13, 35.192.0.0/14, 35.196.0.0/15, 35.198.0.0/16, 35.199.0.0/17, 35.200.0.0/13, 35.208.0.0/12, 35.220.0.0/14, 45.64.0.0/16, 46.19.0.0/16, 64.18.0.0/16, 64.233.0.0/16, 66.102.0.0/16, 66.220.0.0/16, 66.249.0.0/16, 68.66.0.0/16, 70.32.0.0/16, 72.14.0.0/16, 72.52.0.0/16, 74.114.0.0/16, 74.119.0.0/16, 74.125.0.0/16, 81.29.0.0/16, 83.174.0.0/16, 84.15.0.0/16, 87.245.0.0/16, 91.213.0.0/16, 92.46.0.0/16, 94.140.0.0/16, 94.141.0.0/16, 103.4.0.0/16, 104.18.0.0/16, 104.21.0.0/16, 104.31.0.0/16, 104.32.0.0/16, 104.134.0.0/15, 104.156.0.0/16, 104.237.0.0/16, 108.59.0.0/16, 108.170.0.0/16, 108.177.0.0/16, 130.211.0.0/16, 136.112.0.0/12, 142.250.0.0/16, 142.251.0.0/16, 146.148.0.0/16, 157.240.0.0/16, 162.159.0.0/16, 162.216.0.0/16, 162.222.0.0/16, 172.67.0.0/16, 172.110.0.0/16, 172.217.0.0/16, 172.253.0.0/16, 173.194.0.0/16, 173.252.0.0/16, 185.38.0.0/16, 185.53.0.0/16, 185.60.0.0/16, 185.89.0.0/16, 188.114.0.0/16, 190.115.0.0/16, 192.158.0.0/16, 192.178.0.0/15, 193.46.0.0/16, 194.239.0.0/16, 195.16.0.0/12, 198.51.0.0/16, 198.105.244.0/24, 198.105.254.0/24, 199.36.0.0/14, 199.192.112.0/22, 199.223.232.0/21, 199.255.0.0/16, 200.32.0.0/14, 204.124.0.0/16, 204.248.0.0/12, 207.223.160.0/20, 208.65.152.0/22, 208.68.108.0/22, 208.70.0.0/14, 208.81.188.0/22, 208.117.0.0/16, 208.117.224.0/19, 209.85.128.0/17, 212.188.34.0/24, 212.188.37.0/24, 216.58.0.0/13, 95.163.0.0/16, 10.224.0.0/16, 81.27.0.0/16, 185.5.0.0/16, 239.255.0.0/16, 224.0.0.0/16, 104.16.0.0/12, 104.16.51.111/32, 104.17.0.0/12, 104.17.192.0/18, 104.18.0.0/15, 104.19.192.0/18, 108.61.169.0/24, 108.61.173.0/24, 108.61.174.0/24, 108.61.175.0/24, 128.116.0.0/16, 162.159.128.0/18, 162.159.128.233/32, 162.159.129.233/32, 162.159.130.233/32, 162.159.131.233/32, 162.159.132.233/32, 162.159.133.233/32, 162.159.134.233/32, 162.159.135.233/32, 162.159.136.233/32, 162.159.137.233/32, 162.159.138.233/32, 162.159.139.233/32, 162.159.140.233/32, 162.159.141.233/32, 162.159.142.233/32, 162.159.143.233/32, 192.64.174.0/24, 198.41.128.0/17, 138.128.136.0/21, 162.158.0.0/15, 172.64.0.0/13, 34.0.0.0/15, 34.2.0.0/16, 34.3.0.0/23, 34.3.2.0/24, 35.192.0.0/12, 35.208.0.0/12, 35.224.0.0/12, 35.240.0.0/13, 5.200.14.128/25, 66.22.192.0/18
   - **Twitter**:
     ```
     AllowedIPs = 184.31.3.237/32, 69.195.160.128/32, 185.199.111.153/32, 69.195.185.128/32, 69.195.187.128/32, 93.184.221.165/32, 52.30.155.196/32, 104.244.42.8/32, 0.0.0.0/32, 146.75.120.157/32, 69.195.181.128/32, 104.244.42.3/32, 104.244.42.130/32, 34.251.129.198/32, 188.114.96.3/32, 151.101.192.159/32, 188.114.98.235/32, 69.195.182.128/32, 104.244.42.68/32, 209.237.196.128/32, 69.195.163.128/32, 146.75.120.158/32, 54.194.194.104/32, 69.195.178.128/32, 104.244.42.84/32, 209.237.200.128/32, 209.237.198.128/32, 185.199.109.153/32, 209.237.199.128/32, 69.195.176.128/32, 69.195.179.128/32, 69.195.177.128/32, 69.195.186.128/32, 209.237.203.128/32, 152.199.21.141/32, 104.244.42.67/32, 69.195.169.128/32, 104.244.42.195/32, 151.101.0.159/32, 209.237.197.128/32, 178.63.147.160/32, 185.199.108.153/32, 104.244.42.4/32, 104.244.42.132/32, 104.244.42.196/32, 69.195.166.128/32, 52.50.13.36/32, 104.244.42.129/32, 69.195.162.128/32, 69.195.168.128/32, 151.101.128.159/32, 69.195.180.128/32, 188.114.99.235/32, 104.244.42.65/32, 146.75.120.159/32, 104.244.43.131/32, 69.195.184.128/32, 108.186.36.25/32, 69.195.174.128/32, 209.237.193.128/32, 69.195.183.128/32, 209.237.195.128/32, 104.244.42.212/32, 213.230.209.101/32, 104.244.42.131/32, 184.31.10.237/32, 104.244.42.193/32, 69.195.171.128/32, 95.173.103.16/32, 188.114.97.3/32, 188.114.98.238/32, 185.199.110.153/32, 209.237.194.128/32, 104.244.42.148/32, 188.114.99.238/32, 104.244.42.1/32, 209.237.204.128/32, 104.244.42.20/32, 209.237.192.128/32, 151.101.64.159/32, 69.195.175.128/32, 104.244.45.3/32, 3.248.100.228/32, 34.243.204.245/32, 209.237.201.128/32, 69.195.165.128/32, 34.254.1.203/32
   - **Facebook**:
     ```
     AllowedIPs = 31.13.24.0/21, 31.13.64.0/18, 31.13.64.0/19, 31.13.128.0/18, 66.220.144.0/20, 69.63.176.0/20, 69.63.176.0/21, 69.63.184.0/21, 69.63.176.0/24, 69.171.224.0/19, 69.171.239.0/24, 74.119.76.0/22, 103.4.96.0/22, 129.134.0.0/16, 157.240.0.0/16, 173.252.64.0/18, 179.60.192.0/22, 185.60.216.0/22, 204.15.20.0/22, 69.63.176.0/20, 69.171.255.0/24, 173.252.70.0/24, 69.63.184.0/21, 31.13.24.0/21, 31.13.64.0/18, 66.220.144.0/20, 69.63.176.0/20, 69.171.224.0/19, 69.63.176.0/21, 31.13.64.0/19, 66.220.144.0/21, 31.13.24.0/21, 31.13.64.0/18, 69.63.176.0/20, 69.171.224.0/19, 66.220.144.0/21, 31.13.64.0/19, 31.13.64.0/18, 66.220.144.0/20, 69.63.176.0/20, 69.171.224.0/19, 31.13.64.0/19
   - **Instagram**:
     ```
     AllowedIPs = 31.13.24.0/21, 31.13.64.0/18, 45.64.40.0/22, 66.220.144.0/20, 69.63.176.0/20, 69.171.224.0/19, 74.119.76.0/22, 103.4.96.0/22, 129.134.0.0/16, 157.240.0.0/16, 173.252.64.0/18, 179.60.192.0/22, 185.60.216.0/22, 204.15.20.0/22, 157.240.200.63/32, 185.60.219.63/32, 129.134.31.12/32, 66.81.203.132/32, 185.89.218.12/32, 31.13.66.63/32, 84.15.65.162/32, 68.66.224.28/32, 157.240.253.63/32, 83.174.11.224/32, 157.240.9.52/32, 157.240.252.174/32, 157.240.195.63/32, 31.13.71.52/32, 57.144.110.192/32, 157.240.252.17/32, 84.15.66.97/32, 217.168.6.33/32, 31.13.83.52/32, 157.240.241.63/32, 129.134.30.12/32, 185.89.219.12/32, 157.240.252.10/32, 157.240.201.63/32, 66.81.203.197/32, 179.60.195.52/32, 66.81.203.7/32, 216.40.34.41/32, 157.240.202.63/32, 157.240.229.63/32, 157.240.252.63/32, 31.13.72.53/32, 124.108.16.224/32, 157.240.205.63/32, 92.46.37.96/32, 157.240.247.63/32, 157.240.234.63/32, 157.240.235.63/32, 87.245.208.97/32
   - **Google Services**:
     ```
     AllowedIPs = 8.8.4.0/24, 8.8.8.0/24, 8.34.208.0/20, 8.35.192.0/20, 23.236.48.0/20, 23.251.128.0/19, 34.0.0.0/15, 34.2.0.0/16, 34.3.0.0/23, 34.3.3.0/24, 34.3.4.0/24, 34.3.8.0/21, 34.3.16.0/20, 34.3.32.0/19, 34.3.64.0/18, 34.4.0.0/14, 34.8.0.0/13, 34.16.0.0/12, 34.32.0.0/11, 34.64.0.0/10, 34.128.0.0/10, 35.184.0.0/13, 35.192.0.0/14, 35.196.0.0/15, 35.198.0.0/16, 35.199.0.0/17, 35.199.128.0/18, 35.200.0.0/13, 35.208.0.0/12, 35.224.0.0/12, 35.240.0.0/13, 57.140.192.0/18, 64.15.112.0/20, 64.233.160.0/19, 66.22.228.0/23, 66.102.0.0/20, 66.249.64.0/19, 70.32.128.0/19, 72.14.192.0/18, 74.125.0.0/16, 104.154.0.0/15, 104.196.0.0/14, 104.237.160.0/19, 107.167.160.0/19, 107.178.192.0/18, 108.59.80.0/20, 108.170.192.0/18, 108.177.0.0/17, 130.211.0.0/16, 136.22.160.0/20, 136.22.176.0/21, 136.22.184.0/23, 136.22.186.0/24, 142.250.0.0/15, 146.148.0.0/17, 152.65.208.0/22, 152.65.214.0/23, 152.65.218.0/23, 152.65.222.0/23, 152.65.224.0/19, 162.120.128.0/17, 162.216.148.0/22, 162.222.176.0/21, 172.110.32.0/21, 172.217.0.0/16, 172.253.0.0/16, 173.194.0.0/16, 173.255.112.0/20, 192.158.28.0/22, 192.178.0.0/15, 193.186.4.0/24, 199.36.154.0/23, 199.36.156.0/24, 199.192.112.0/22, 199.223.232.0/21, 207.223.160.0/20, 208.65.152.0/22, 208.68.108.0/22, 208.81.188.0/22, 208.117.224.0/19, 209.85.128.0/17, 216.58.192.0/19, 216.73.80.0/20, 216.239.32.0/19, 2001:4860::/32, 2404:6800::/32, 2404:f340::/32, 2600:1900::/28, 2605:ef80::/32, 2606:40::/32, 2606:73c0::/32, 2607:f8b0::/32, 2620:11a:a000::/40, 2620:120:e000::/40, 2800:3f0::/32, 2a00:1450::/32, 2c0f:fb50::/32
   - **Spotify**:
     ```
     AllowedIPs = 104.154.0.0/15, 104.64.0.0/10, 146.75.0.0/16, 151.101.0.0/16, 18.128.0.0/9, 18.32.0.0/11, 18.64.0.0/10, 193.14.90.0/24, 199.232.0.0/16, 2.16.102.0/23, 2.18.64.0/20, 2.19.204.0/22, 212.95.165.0/26, 216.239.32.0/19, 35.184.0.0/13, 67.199.248.0/24, 88.221.128.0/21
   ```

4. **Сохраните и переимпортируйте конфиг**  
   Сохраните изменённый файл `WARP.conf` и переимпортируйте его в ваш VPN-клиент (AmneziaWG или WireGuard), как описано в разделе «Импорт конфига». Если используете QR-код, сгенерируйте новый QR-код с обновлённой конфигурацией.

5. **Проверьте подключение**  
   Подключитесь к VPN и убедитесь, что только указанные сервисы (например, YouTube, Discord) проходят через VPN. Проверьте это следующим образом:
   - Откройте сервис (например, YouTube или Discord) и убедитесь, что он работает через VPN.
   - Проверьте ваш IP для непроксируемых сервисов (например, `curl ifconfig.me` при доступе к непроксируемому сайту), чтобы убедиться, что он использует ваше обычное интернет-соединение.

**Примечание**: IP-диапазоны сервисов могут меняться со временем, так как компании обновляют свою инфраструктуру. Проверяйте актуальные IP-диапазоны через надёжные источники или используйте инструменты вроде `nslookup` или `dig`, чтобы найти текущие IP-адреса нужных сервисов.

## Проверка подключения

После настройки выборочного проксирования проверьте, что VPN работает корректно:

1. **Проверьте внешний IP**:
   ```
   curl ifconfig.me
   ```
   Для непроксируемых сервисов должен отображаться ваш реальный IP, а для проксируемых — IP VPN.

2. **Проверьте использование WARP**:
   ```
   curl https://www.cloudflare.com/cdn-cgi/trace
   ```
   При доступе к проксируемым сервисам (например, YouTube) в выводе должна быть строка `warp=on`.

3. **Проверьте доступ к проксируемым сервисам**:
   ```
   ping youtube.com
   ```
   Убедитесь, что проксируемые сервисы доступны, а непроксируемые обходят VPN.

## Настройка параметров

Если соединение нестабильно, настройте параметры в конфиге для оптимизации производительности и обхода блокировок провайдера:

| Параметр | Описание | Рекомендуемые значения |
|----------|----------|-----------------------|
| `Jc` | Количество Junk-пакетов перед началом сессии | 4–6 (мобильные сети), 2 (низкоскоростные) |
| `Jmin` | Минимальный размер Junk-пакетов | 20–50 |
| `Jmax` | Максимальный размер Junk-пакетов | 50–100 |
| `S1` | Размер случайных данных в init-пакете | 0 (удалить для WireGuard) |
| `S2` | Размер случайных данных в ответе | 0 (удалить для WireGuard) |
| `H1` | Заголовок первого байта рукопожатия | 1 (удалить для WireGuard) |
| `H2` | Заголовок первого байта ответа | 2 (удалить для WireGuard) |
| `H3` | Заголовок пакета UnderLoad | 3 (удалить для WireGuard) |
| `H4` | Заголовок пакета данных | 4 (удалить для WireGuard) |
| `MTU` | Максимальный размер пакета | 1280 (удалить или оставить) |

**Рекомендации**:
- Для мобильных сетей:
  ```
  Jc = 4
  Jmin = 40
  Jmax = 70
  ```
- Для низкоскоростных соединений:
  ```
  Jc = 2
  Jmin = 20
  Jmax = 50
  ```

**Как редактировать**: Откройте `WARP.conf` в текстовом редакторе, измените параметры, сохраните и переимпортируйте конфигурацию.

**Совет**: Экспериментируйте с параметрами, чтобы найти оптимальные значения для вашей сети. Начните с рекомендуемых настроек и корректируйте постепенно.

## Устранение неполадок

| Проблема | Решение |
|----------|---------|
| **Трафик не идёт (0 Б в AmneziaWG)** | 1. Убедитесь, что параметры `S1`, `S2`, `Jc`, и т.д. удалены для WireGuard.<br>2. Измените `Jc`, `Jmin`, `Jmax`.<br>3. Проверьте, не блокирует ли провайдер UDP-порты. |
| **Скрипт не скачивается** | 1. Используйте VPN для обхода блокировок.<br>2. Скачайте скрипт вручную: [warp_generator.sh](https://raw.githubusercontent.com/KnowerLife/VPN/main/warp_generator.sh). |
| **Не удаётся подключиться** | 1. Проверьте правильность конфига (нет ли ошибок в синтаксисе).<br>2. Попробуйте другой сервер или порт (например, 2408).<br>3. Обновите клиент до последней версии. |
| **Выборочное проксирование не работает** | 1. Проверьте, правильно ли указаны IP-диапазоны в `AllowedIPs`.<br>2. Убедитесь, что нет перекрывающихся или некорректных диапазонов.<br>3. Протестируйте с меньшим набором IP для диагностики. |

**Дополнительные решения**:
- Если скорость низкая, попробуйте сменить DNS на `8.8.8.8` или `8.8.4.4` (Google DNS).
- Если провайдер блокирует WireGuard, используйте AmneziaWG с обфускацией трафика или альтернативные протоколы, такие как OpenVPN или Shadowsocks.

## Пример конфига

Пример конфигурации для WireGuard с выборочным проксированием для YouTube и Discord:

```
[Interface]
PrivateKey = <ваш_приватный_ключ>
Address = 192.168.0.1/32
DNS = 1.1.1.1, 1.0.0.1

[Peer]
PublicKey = <публичный_ключ_cloudflare>
AllowedIPs = 34.64.0.0/10, 34.96.0.0/20, 34.108.0.0/20, 34.122.0.0/17, 34.128.0.0/10, 35.184.0.0/13, 35.192.0.0/14, 35.196.0.0/15, 35.198.0.0/16, 35.199.0.0/17, 35.200.0.0/13, 35.208.0.0/12, 35.220.0.0/14, 45.64.0.0/16, 46.19.0.0/16, 64.18.0.0/16, 64.233.0.0/16, 66.102.0.0/16, 66.220.0.0/16, 66.249.0.0/16, 68.66.0.0/16, 70.32.0.0/16, 72.14.0.0/16, 72.52.0.0/16, 74.114.0.0/16, 74.119.0.0/16, 74.125.0.0/16, 81.29.0.0/16, 83.174.0.0/16, 84.15.0.0/16, 87.245.0.0/16, 91.213.0.0/16, 92.46.0.0/16, 94.140.0.0/16, 94.141.0.0/16, 103.4.0.0/16, 104.18.0.0/16, 104.21.0.0/16, 104.31.0.0/16, 104.32.0.0/16, 104.134.0.0/15, 104.156.0.0/16, 104.237.0.0/16, 108.59.0.0/16, 108.170.0.0/16, 108.177.0.0/16, 130.211.0.0/16, 136.112.0.0/12, 142.250.0.0/16, 142.251.0.0/16, 146.148.0.0/16, 157.240.0.0/16, 162.159.0.0/16, 162.216.0.0/16, 162.222.0.0/16, 172.67.0.0/16, 172.110.0.0/16, 172.217.0.0/16, 172.253.0.0/16, 173.194.0.0/16, 173.252.0.0/16, 185.38.0.0/16, 185.53.0.0/16, 185.60.0.0/16, 185.89.0.0/16, 188.114.0.0/16, 190.115.0.0/16, 192.158.0.0/16, 192.178.0.0/15, 193.46.0.0/16, 194.239.0.0/16, 195.16.0.0/12, 198.51.0.0/16, 198.105.244.0/24, 198.105.254.0/24, 199.36.0.0/14, 199.192.112.0/22, 199.223.232.0/21, 199.255.0.0/16, 200.32.0.0/14, 204.124.0.0/16, 204.248.0.0/12, 207.223.160.0/20, 208.65.152.0/22, 208.68.108.0/22, 208.70.0.0/14, 208.81.188.0/22, 208.117.0.0/16, 208.117.224.0/19, 209.85.128.0/17, 212.188.34.0/24, 212.188.37.0/24, 216.58.0.0/13, 95.163.0.0/16, 10.224.0.0/16, 81.27.0.0/16, 185.5.0.0/16, 239.255.0.0/16, 224.0.0.0/16, 104.16.0.0/12, 104.16.51.111/32, 104.17.0.0/12, 104.17.192.0/18, 104.18.0.0/15, 104.19.192.0/18, 108.61.169.0/24, 108.61.173.0/24, 108.61.174.0/24, 108.61.175.0/24, 128.116.0.0/16, 162.159.128.0/18, 162.159.128.233/32, 162.159.129.233/32, 162.159.130.233/32, 162.159.131.233/32, 162.159.132.233/32, 162.159.133.233/32, 162.159.134.233/32, 162.159.135.233/32, 162.159.136.233/32, 162.159.137.233/32, 162.159.138.233/32, 162.159.139.233/32, 162.159.140.233/32, 162.159.141.233/32, 162.159.142.233/32, 162.159.143.233/32, 192.64.174.0/24, 198.41.128.0/17, 138.128.136.0/21, 162.158.0.0/15, 172.64.0.0/13, 34.0.0.0/15, 34.2.0.0/16, 34.3.0.0/23, 34.3.2.0/24, 35.192.0.0/12, 35.208.0.0/12, 35.224.0.0/12, 35.240.0.0/13, 5.200.14.128/25, 66.22.192.0/18
Endpoint = engage.cloudflareclient.com:2408
```

**Примечание**: Замените `<ваш_приватный_ключ>` и `<публичный_ключ_cloudflare>` на значения из сгенерированного конфига.

## Часто задаваемые вопросы (FAQ)

- **Можно ли использовать WARP бесплатно?**  
  Да, Cloudflare WARP предоставляет бесплатный доступ с ограничением трафика. Для больших объёмов данных рассмотрите подписку WARP+.

- **Почему VPN работает медленно?**  
  Скорость зависит от провайдера, сети или настроек конфига. Попробуйте уменьшить `MTU` до 1200 или скорректировать `Jc`, `Jmin`, `Jmax`.

- **Что делать, если провайдер блокирует WireGuard?**  
  Используйте AmneziaWG с обфускацией трафика или альтернативные протоколы, такие как OpenVPN или Shadowsocks.

- **Безопасно ли запускать скрипт?**  
  Да, но перед выполнением проверьте код скрипта на [GitHub](https://github.com/KnowerLife/VPN/) для уверенности в его безопасности.

- **Почему выборочное проксирование не работает?**  
  Убедитесь, что IP-диапазоны в `AllowedIPs` указаны правильно и охватывают нужные сервисы. Протестируйте с меньшим набором IP для диагностики.

## Полезные советы

- **Безопасность**: Всегда проверяйте код скрипта перед выполнением, чтобы избежать потенциальных рисков.
- **Обход блокировок**: Если WireGuard блокируется, попробуйте сменить порт или использовать серверы в других регионах.
- **Обновления**: Регулярно проверяйте [репозиторий KnowerLife](https://github.com/KnowerLife/VPN/) на наличие обновлений скрипта и клиентов.
- **Резервное копирование**: Храните копии конфига и ключей в безопасном месте.
- **Тестирование**: После настройки протестируйте как проксируемые (например, YouTube), так и непроксируемые сервисы, чтобы убедиться, что выборочное проксирование работает корректно.

## Поддержка и обратная связь

Если у вас возникли вопросы или предложения, присоединяйтесь к [Telegram-чату](https://t.me/knowerlife) или создайте issue на [GitHub](https://github.com/KnowerLife/VPN/). Полная документация доступна в репозитории.

## Дополнительные замечания

- **Безопасность**: Проверяйте скрипт перед выполнением, чтобы избежать потенциальных рисков.
- **Ограничения**: Некоторые провайдеры могут блокировать WireGuard. В таких случаях попробуйте OpenVPN или Shadowsocks.
- **Совместимость**: Регулярно обновляйте клиенты и скрипт для обеспечения стабильной работы.

## Заключение

Настройка Cloudflare WARP с AmneziaWG или WireGuard, включая выборочное проксирование для определённых сервисов, — это простой и эффективный способ защитить свои данные, обойти блокировки и настроить интернет под ваши нужды. Скрипт от KnowerLife делает процесс доступным для пользователей всех уровней. Следуйте этому руководству, экспериментируйте с параметрами и настройте надёжное VPN-соединение уже сегодня!
